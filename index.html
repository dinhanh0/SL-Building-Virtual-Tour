<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Purdue Indoor Virtual Tour</title>

  <link rel="stylesheet" href="style.css" />

  <!-- Pannellum 360 viewer -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"
  />
  <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
</head>

<body>
  <header id="site-header">
    <h1>Purdue SL Building Virtual Tour</h1>
    <p class="subtitle">
      Explore the basement and upper floors with 360° images and an interactive minimap.
    </p>
  </header>

  <section id="instructions">
    <h2>How to Use</h2>
    <ul>
      <li>Click dots on the minimap to jump between locations.</li>
      <li>Use the floor buttons (0, 1, 2, 3) to switch between floors.</li>
      <li>Click the compass to re-center the view.</li>
    </ul>
  </section>

  <div id="container">
    <!-- Dev overlay -->
    <div id="onscreen-dev">
      <div class="dev-title">Dev Panel</div>

      <div class="dev-section">
        <div id="dev-current-node">Node: —</div>
        <div id="dev-view">Yaw: 0 | Pitch: 0</div>
      </div>

      <button id="dev-btn-default">Save DEFAULT_ORIENTATION</button>

      <div class="dev-section">
        <label>Neighbor:</label>
        <select id="dev-neighbor-select"></select>

        <button id="dev-btn-edge">Save EDGE_VIEW</button>
        <button id="dev-btn-icon">Save ICON_YAW</button>

        <div class="dev-row">
          <label for="dev-extra-dir" style="color:#ccc;font-size:11px;">Dir:</label>
          <select id="dev-extra-dir">
            <option value="forward">forward</option>
            <option value="back">back</option>
            <option value="left">left</option>
            <option value="right">right</option>
          </select>
        </div>
        <button id="dev-btn-extra">Save EXTRA_LINK</button>
      </div>

      <button id="dev-btn-map">Save MAP_POSITION (mapTop/mapLeft)</button>

      <div class="dev-output">
        <textarea id="dev-output-box" readonly></textarea>
      </div>
    </div>

    <!-- Main pano viewer -->
    <div id="viewer-panel">
      <div id="viewer-header">
        <h1 id="location-title">Select a location on the map</h1>
      </div>

      <div id="viewer">
        <div id="panorama"></div>
        <div id="pano-transition"></div>
      </div>

      <div id="viewer-info">
        <p id="location-description"></p>
        <div id="neighbor-buttons"></div>
      </div>

      <div id="controls-right">
        <div id="compass-widget">
          <div class="compass-ring"></div>
          <div class="compass-needle"></div>
          <div class="compass-center-dot"></div>
        </div>

        <div id="floor-selector">
          <button class="floor-btn active" data-floor="0">0</button>
          <button class="floor-btn" data-floor="1">1</button>
          <button class="floor-btn" data-floor="2">2</button>
          <button class="floor-btn" data-floor="3">3</button>
        </div>
      </div>
    </div>

    <!-- Minimap -->
    <div id="map-panel">
      <img id="map-image" src="floorplan(edited)/floor0.png" alt="Floor Map" />
    </div>
  </div>

  <!-- Floor graph data -->
  <script src="nodes_floor0.js"></script>
  <script src="nodes_floor1.js"></script>
  <script src="nodes_floor2.js"></script>
  <script src="nodes_floor3.js"></script>

  <!-- App logic -->
  <script src="script.js"></script>

  <div id="debug-orient"></div>

  <footer id="site-footer">
    <p>CSCI 435 – 3D Map Project • Created by Anh Dinh</p>
  </footer>
</body>
</html>
